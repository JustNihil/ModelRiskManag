<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Управление рисками IT-проектов</title>
    <link rel="stylesheet" href="styles.css" id="css-link">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Управление рисками IT-проектов</h1>

    <div class="section">
        <h2>Этапы проекта</h2>
        <div class="input-row">
            <input type="text" id="stageName" placeholder="Название">
            <input type="number" id="stageDuration" placeholder="Продолжительность (дни)">
            <input type="number" id="stageCost" placeholder="Стоимость ($)">
            <button onclick="addStage()">Добавить этап</button>
        </div>
        <table id="stagesTable">
            <tr><th>Название</th><th>Продолжительность (дни)</th><th>Стоимость ($)</th><th>Удалить</th></tr>
        </table>
    </div>

    <div class="section">
        <h2>Риски</h2>
        <div class="input-row">
            <input type="text" id="riskName" placeholder="Название">
            <input type="number" id="riskProb" step="0.1" min="0" max="1" placeholder="Вероятность (0-1)">
            <input type="number" id="riskTime" min="0" placeholder="Влияние на время (дни)">
            <input type="number" id="riskCost" min="0" placeholder="Влияние на стоимость ($)">
            <select id="riskStrategy">
                <option value="Ignore">Игнорировать</option>
                <option value="Mitigate">Снизить</option>
                <option value="Eliminate">Устранить</option>
            </select>
            <select id="riskCategory">
                <option value="Технические">Технические</option>
                <option value="Организационные">Организационные</option>
                <option value="Внешние">Внешние</option>
                <option value="Не указано">Не указано</option>
            </select>
            <button onclick="addCustomRisk()">Добавить риск</button>
        </div>
        <div class="input-row">
            <select id="typicalRiskCategory">
                <option value="">Выберите категорию</option>
                <option value="Технические">Технические</option>
                <option value="Организационные">Организационные</option>
                <option value="Внешние">Внешние</option>
            </select>
            <button onclick="addTypicalRisksByCategory(document.getElementById('typicalRiskCategory').value)">Добавить риски категории</button>
        </div>
        <table id="risksTable">
            <tr><th>Название</th><th>Вероятность</th><th>Время (дни)</th><th>Стоимость ($)</th><th>Стратегия</th><th>Категория</th><th>Удалить</th></tr>
        </table>
    </div>

    <div class="section">
        <h2>Настройки модели</h2>
        <div class="input-row">
            <div class="input-group">
                <label>Пороговое время (дни):</label>
                <input type="number" id="timeThreshold" value="150">
            </div>
            <div class="input-group">
                <label>Пороговая стоимость ($):</label>
                <input type="number" id="costThreshold" value="75000">
            </div>
            <div class="input-group">
                <label>Целевое время (дни):</label>
                <input type="number" id="targetTime" value="120">
            </div>
            <div class="input-group">
                <label>Целевая стоимость ($):</label>
                <input type="number" id="targetCost" value="60000">
            </div>
        </div>
        <div class="action-buttons">
            <button onclick="createModel()">Создать модель</button>
            <button onclick="saveData()">Сохранить данные</button>
            <button onclick="loadData()">Загрузить данные</button>
        </div>
    </div>

    <div class="section">
        <h2>Стратегия управления рисками</h2>
        <div class="input-row">
            <select id="mitigationStrategy">
                <option value="Ignore">Игнорировать</option>
                <option value="Mitigate">Снизить</option>
                <option value="Eliminate">Устранить</option>
            </select>
            <input type="number" id="mitigationBudget" value="10000" placeholder="Бюджет ($)">
            <button onclick="setMitigation()">Установить</button>
        </div>
    </div>

    <div class="section dashboard">
        <h2>Результаты и рекомендации</h2>
        <div id="dashboardSummary"></div>
        <canvas id="metricsChart" width="400" height="200"></canvas>
        <canvas id="risksChart" width="400" height="200"></canvas>
        <canvas id="timeDistributionChart" width="400" height="200"></canvas>
        <canvas id="costDistributionChart" width="400" height="200"></canvas>
        <table id="riskResultsTable">
            <tr><th>Название</th><th>Снижен</th><th>Время (дни)</th><th>Стоимость ($)</th><th>Стратегия</th><th>Категория</th><th>Приоритет</th></tr>
        </table>
        <div id="recommendations"></div>
        <div id="riskLogs"></div>
    </div>

    <button onclick="runSimulation()">Запустить симуляцию</button>

    <script type="module" src="api.js"></script>
    <script type="module" src="dashboard.js"></script>
    <script type="module" src="stages.js"></script>
    <script type="module" src="risks.js"></script>
    <script type="module" src="simulation.js"></script>
    <script type="module" src="storage.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>